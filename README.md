# Sberbank —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –Ω–∞ Go —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º gRPC, PostgreSQL, Redis –∏ Kafka —Å –∑–∞–ø—É—Å–∫–æ–º —á–µ—Ä–µ–∑ Docker –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–ê–†1-—Å–µ—Ä–≤–∏—Å, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- POST /create: —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
- GET /list: –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- DELETE /delete: —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É 
- PUT /done: –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É

API-—Å–µ—Ä–≤–∏—Å –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –≤ DB-Service

**–ë–î-—Å–µ—Ä–≤–∏—Å, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- –ó–∞–ø—Ä–æ—Å—ã –æ—Ç API-—Å–µ—Ä–≤–∏—Å–∞ —á–µ—Ä–µ–∑ gRPC
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis –∑–∞–¥–∞—á, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å TTL

**Kafka-—Å–µ—Ä–≤–∏—Å, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- API-—Å–µ—Ä–≤–∏—Å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Kafka –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–±—ã—Ç–∏–∏
- Kafka-—Å–µ—Ä–≤–∏—Å –≤—ã—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑ –∫–∞—Ñ–∫–∏ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ª–æ–≥–≥–∏—Ä—É–µ—Ç –∏—Ö –≤ —Ñ–∞–π–ª 

**–¢–µ—Å—Ç—ã**:
- –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ api-handlers

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

- **API Service** (`cmd/api`) - REST API —Å–µ—Ä–≤–∏—Å –Ω–∞ Gin, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π HTTP endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏
- **DB Service** (`cmd/db`) - gRPC —Å–µ—Ä–≤–µ—Ä, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ —Ä–∞–±–æ—Ç—É —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **Kafka Logger** (`cmd/kafka-logger`) - —Å–µ—Ä–≤–∏—Å –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –∏–∑ Kafka –≤ —Ñ–∞–π–ª

## üì° –†–∞–±–æ—Ç–∞ API Endpoints

### –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
```http
POST /create
Content-Type: application/json

{
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏",
  "content": "–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
}
```

**–û—Ç–≤–µ—Ç:**
![alt text](images/image.png)

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
```http
GET /list
```

**–û—Ç–≤–µ—Ç:**

![alt text](<images/image copy.png>)

### –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
```http
DELETE /delete
Content-Type: application/json

{
  "id": "uuid"
}
```

**–û—Ç–≤–µ—Ç:**

![alt text](<images/image copy 2.png>)

### –û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é
```http
PUT /done
Content-Type: application/json

{
  "id": "uuid"
}
```

**–û—Ç–≤–µ—Ç:**
![alt text](<images/image copy 3.png>)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
go test ./...
```

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º:
```bash
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html
```
![alt text](<images/image copy 4.png>)


## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `CHECKLIST_`:

- `CHECKLIST_API_PORT` - –ø–æ—Ä—Ç –¥–ª—è API —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 8080)
- `CHECKLIST_DB_GRPC_URL` - –∞–¥—Ä–µ—Å gRPC —Å–µ—Ä–≤–µ—Ä–∞ DB —Å–µ—Ä–≤–∏—Å–∞
- `CHECKLIST_DB_GRPC_PORT` - –ø–æ—Ä—Ç –¥–ª—è gRPC —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50051)
- `CHECKLIST_DB_POSTGRES_DSN` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `CHECKLIST_REDIS_ADDR` - –∞–¥—Ä–µ—Å Redis —Å–µ—Ä–≤–µ—Ä–∞
- `CHECKLIST_KAFKA_BROKER` - –∞–¥—Ä–µ—Å Kafka –±—Ä–æ–∫–µ—Ä–∞
- `CHECKLIST_KAFKA_TOPIC` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–∞ Kafka
- `CHECKLIST_KAFKA_LOG_FILE` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤ Kafka

## üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:
- –û—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 15 —Å–µ–∫—É–Ω–¥
- –ö—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–¥–∞—á–∞–º–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ Kafka:
- `create` - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏
- `list` - –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
- `delete` - –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏
- `mark_done` - –ø—Ä–∏ –æ—Ç–º–µ—Ç–∫–µ –∑–∞–¥–∞—á–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π

–°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è Kafka Logger —Å–µ—Ä–≤–∏—Å–æ–º –∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª –ª–æ–≥–æ–≤ (logs/kafka.log)


